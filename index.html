/* =====================================================
   PROJECTS PINNED BIG SLIDER – small→big→small cards
===================================================== */
const slides = gsap.utils.toArray(".project-slide");
if (slides.length) {
  // initial state: all slides small / hidden
  gsap.set(slides, { autoAlpha: 0, scale: 0.8, y: 40 });
  // first slide visible & centered
  gsap.set(slides[0], { autoAlpha: 1, scale: 1.05, y: 0, zIndex: 20 });

  const projTL = gsap.timeline({
    scrollTrigger: {
      trigger: ".projects-pin",
      start: "top top",
      end: "+=" + (slides.length * 500), // longer scroll = clearer transitions
      scrub: true,
      pin: true,
      anticipatePin: 1
    }
  });

  slides.forEach((slide, i) => {
    const nextSlide = slides[i + 1];

    // 1) bring current slide big in the middle
    projTL.to(slide, {
      autoAlpha: 1,
      scale: 1.08,
      y: 0,
      zIndex: 20 + i,
      duration: 0.8,
      ease: "power2.out"
    });

    // 2) then push it back (smaller & a bit down)
    projTL.to(slide, {
      autoAlpha: i === slides.length - 1 ? 1 : 0.25, // last one stays visible
      scale: 0.9,
      y: 40,
      duration: 0.8,
      ease: "power2.in"
    });

    // 3) put next slide on top so it can grow in front
    if (nextSlide) {
      projTL.set(nextSlide, { zIndex: 30 + i }, "<");
    }
  });
}
